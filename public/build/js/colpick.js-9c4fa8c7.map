{"version":3,"sources":["colpick.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"colpick.js","sourcesContent":["/*\ncolpick Color Picker\nCopyright 2013 Jose Vargas. Licensed under GPL license. Based on Stefan Petre's Color Picker www.eyecon.ro, dual licensed under the MIT and GPL licenses\n\nFor usage and examples: colpick.com/plugin\n */\n\n(function ($) {\n\tvar colpick = function () {\n\t\tvar\n\t\t\ttpl = '<div class=\"colpick\"><div class=\"colpick_color\"><div class=\"colpick_color_overlay1\"><div class=\"colpick_color_overlay2\"><div class=\"colpick_selector_outer\"><div class=\"colpick_selector_inner\"></div></div></div></div></div><div class=\"colpick_hue\"><div class=\"colpick_hue_arrs\"><div class=\"colpick_hue_larr\"></div><div class=\"colpick_hue_rarr\"></div></div></div><div class=\"colpick_new_color\"></div><div class=\"colpick_current_color\"></div><div class=\"colpick_hex_field\"><div class=\"colpick_field_letter\">#</div><input type=\"text\" maxlength=\"6\" size=\"6\" /></div><div class=\"colpick_rgb_r colpick_field\"><div class=\"colpick_field_letter\">R</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_rgb_g colpick_field\"><div class=\"colpick_field_letter\">G</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_rgb_b colpick_field\"><div class=\"colpick_field_letter\">B</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_h colpick_field\"><div class=\"colpick_field_letter\">H</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_s colpick_field\"><div class=\"colpick_field_letter\">S</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_hsb_b colpick_field\"><div class=\"colpick_field_letter\">B</div><input type=\"text\" maxlength=\"3\" size=\"3\" /><div class=\"colpick_field_arrs\"><div class=\"colpick_field_uarr\"></div><div class=\"colpick_field_darr\"></div></div></div><div class=\"colpick_submit\"></div></div>',\n\t\t\tdefaults = {\n\t\t\t\tshowEvent: 'click',\n\t\t\t\tonShow: function () {},\n\t\t\t\tonBeforeShow: function(){},\n\t\t\t\tonHide: function () {},\n\t\t\t\tonChange: function () {},\n\t\t\t\tonSubmit: function () {},\n\t\t\t\tcolorScheme: 'light',\n\t\t\t\tcolor: '3289c7',\n\t\t\t\tlivePreview: true,\n\t\t\t\tflat: false,\n\t\t\t\tlayout: 'full',\n\t\t\t\tsubmit: 1,\n\t\t\t\tsubmitText: 'OK',\n\t\t\t\theight: 156\n\t\t\t},\n\t\t\t//Fill the inputs of the plugin\n\t\t\tfillRGBFields = function  (hsb, cal) {\n\t\t\t\tvar rgb = hsbToRgb(hsb);\n\t\t\t\t$(cal).data('colpick').fields\n\t\t\t\t\t.eq(1).val(rgb.r).end()\n\t\t\t\t\t.eq(2).val(rgb.g).end()\n\t\t\t\t\t.eq(3).val(rgb.b).end();\n\t\t\t},\n\t\t\tfillHSBFields = function  (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').fields\n\t\t\t\t\t.eq(4).val(Math.round(hsb.h)).end()\n\t\t\t\t\t.eq(5).val(Math.round(hsb.s)).end()\n\t\t\t\t\t.eq(6).val(Math.round(hsb.b)).end();\n\t\t\t},\n\t\t\tfillHexFields = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').fields.eq(0).val(hsbToHex(hsb));\n\t\t\t},\n\t\t\t//Set the round selector position\n\t\t\tsetSelector = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').selector.css('backgroundColor', '#' + hsbToHex({h: hsb.h, s: 100, b: 100}));\n\t\t\t\t$(cal).data('colpick').selectorIndic.css({\n\t\t\t\t\tleft: parseInt($(cal).data('colpick').height * hsb.s/100, 10),\n\t\t\t\t\ttop: parseInt($(cal).data('colpick').height * (100-hsb.b)/100, 10)\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Set the hue selector position\n\t\t\tsetHue = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').hue.css('top', parseInt($(cal).data('colpick').height - $(cal).data('colpick').height * hsb.h/360, 10));\n\t\t\t},\n\t\t\t//Set current and new colors\n\t\t\tsetCurrentColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').currentColor.css('backgroundColor', '#' + hsbToHex(hsb));\n\t\t\t},\n\t\t\tsetNewColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colpick').newColor.css('backgroundColor', '#' + hsbToHex(hsb));\n\t\t\t},\n\t\t\t//Called when the new color is changed\n\t\t\tchange = function (ev) {\n\t\t\t\tvar cal = $(this).parent().parent(), col;\n\t\t\t\tif (this.parentNode.className.indexOf('_hex') > 0) {\n\t\t\t\t\tcal.data('colpick').color = col = hexToHsb(fixHex(this.value));\n\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t} else if (this.parentNode.className.indexOf('_hsb') > 0) {\n\t\t\t\t\tcal.data('colpick').color = col = fixHSB({\n\t\t\t\t\t\th: parseInt(cal.data('colpick').fields.eq(4).val(), 10),\n\t\t\t\t\t\ts: parseInt(cal.data('colpick').fields.eq(5).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colpick').fields.eq(6).val(), 10)\n\t\t\t\t\t});\n\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t} else {\n\t\t\t\t\tcal.data('colpick').color = col = rgbToHsb(fixRGB({\n\t\t\t\t\t\tr: parseInt(cal.data('colpick').fields.eq(1).val(), 10),\n\t\t\t\t\t\tg: parseInt(cal.data('colpick').fields.eq(2).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colpick').fields.eq(3).val(), 10)\n\t\t\t\t\t}));\n\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t}\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\tcal.data('colpick').onChange.apply(cal.parent(), [col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el, 0]);\n\t\t\t},\n\t\t\t//Change style on blur and on focus of inputs\n\t\t\tblur = function (ev) {\n\t\t\t\t$(this).parent().removeClass('colpick_focus');\n\t\t\t},\n\t\t\tfocus = function () {\n\t\t\t\t$(this).parent().parent().data('colpick').fields.parent().removeClass('colpick_focus');\n\t\t\t\t$(this).parent().addClass('colpick_focus');\n\t\t\t},\n\t\t\t//Increment/decrement arrows functions\n\t\t\tdownIncrement = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar field = $(this).parent().find('input').focus();\n\t\t\t\tvar current = {\n\t\t\t\t\tel: $(this).parent().addClass('colpick_slider'),\n\t\t\t\t\tmax: this.parentNode.className.indexOf('_hsb_h') > 0 ? 360 : (this.parentNode.className.indexOf('_hsb') > 0 ? 100 : 255),\n\t\t\t\t\ty: ev.pageY,\n\t\t\t\t\tfield: field,\n\t\t\t\t\tval: parseInt(field.val(), 10),\n\t\t\t\t\tpreview: $(this).parent().parent().data('colpick').livePreview\n\t\t\t\t};\n\t\t\t\t$(document).mouseup(current, upIncrement);\n\t\t\t\t$(document).mousemove(current, moveIncrement);\n\t\t\t},\n\t\t\tmoveIncrement = function (ev) {\n\t\t\t\tev.data.field.val(Math.max(0, Math.min(ev.data.max, parseInt(ev.data.val - ev.pageY + ev.data.y, 10))));\n\t\t\t\tif (ev.data.preview) {\n\t\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupIncrement = function (ev) {\n\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\tev.data.el.removeClass('colpick_slider').find('input').focus();\n\t\t\t\t$(document).off('mouseup', upIncrement);\n\t\t\t\t$(document).off('mousemove', moveIncrement);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Hue slider functions\n\t\t\tdownHue = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\ty: $(this).offset().top\n\t\t\t\t};\n\t\t\t\t$(document).on('mouseup touchend',current,upHue);\n\t\t\t\t$(document).on('mousemove touchmove',current,moveHue);\n\t\t\t\t\n\t\t\t\tvar pageY = ((ev.type == 'touchstart') ? ev.originalEvent.changedTouches[0].pageY : ev.pageY );\n\t\t\t\tchange.apply(\n\t\t\t\t\tcurrent.cal.data('colpick')\n\t\t\t\t\t.fields.eq(4).val(parseInt(360*(current.cal.data('colpick').height - (pageY - current.y))/current.cal.data('colpick').height, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[current.cal.data('colpick').livePreview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoveHue = function (ev) {\n\t\t\t\tvar pageY = ((ev.type == 'touchmove') ? ev.originalEvent.changedTouches[0].pageY : ev.pageY );\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colpick')\n\t\t\t\t\t.fields.eq(4).val(parseInt(360*(ev.data.cal.data('colpick').height - Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageY - ev.data.y))))/ev.data.cal.data('colpick').height, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupHue = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\t$(document).off('mouseup touchend',upHue);\n\t\t\t\t$(document).off('mousemove touchmove',moveHue);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Color selector functions\n\t\t\tdownSelector = function (ev) {\n\t\t\t\tev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\tpos: $(this).offset()\n\t\t\t\t};\n\t\t\t\tcurrent.preview = current.cal.data('colpick').livePreview;\n\t\t\t\t\n\t\t\t\t$(document).on('mouseup touchend',current,upSelector);\n\t\t\t\t$(document).on('mousemove touchmove',current,moveSelector);\n\n\t\t\t\tvar payeX,pageY;\n\t\t\t\tif(ev.type == 'touchstart') {\n\t\t\t\t\tpageX = ev.originalEvent.changedTouches[0].pageX,\n\t\t\t\t\tpageY = ev.originalEvent.changedTouches[0].pageY;\n\t\t\t\t} else {\n\t\t\t\t\tpageX = ev.pageX;\n\t\t\t\t\tpageY = ev.pageY;\n\t\t\t\t}\n\n\t\t\t\tchange.apply(\n\t\t\t\t\tcurrent.cal.data('colpick').fields\n\t\t\t\t\t.eq(6).val(parseInt(100*(current.cal.data('colpick').height - (pageY - current.pos.top))/current.cal.data('colpick').height, 10)).end()\n\t\t\t\t\t.eq(5).val(parseInt(100*(pageX - current.pos.left)/current.cal.data('colpick').height, 10))\n\t\t\t\t\t.get(0),\n\t\t\t\t\t[current.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoveSelector = function (ev) {\n\t\t\t\tvar payeX,pageY;\n\t\t\t\tif(ev.type == 'touchmove') {\n\t\t\t\t\tpageX = ev.originalEvent.changedTouches[0].pageX,\n\t\t\t\t\tpageY = ev.originalEvent.changedTouches[0].pageY;\n\t\t\t\t} else {\n\t\t\t\t\tpageX = ev.pageX;\n\t\t\t\t\tpageY = ev.pageY;\n\t\t\t\t}\n\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colpick').fields\n\t\t\t\t\t.eq(6).val(parseInt(100*(ev.data.cal.data('colpick').height - Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageY - ev.data.pos.top))))/ev.data.cal.data('colpick').height, 10)).end()\n\t\t\t\t\t.eq(5).val(parseInt(100*(Math.max(0,Math.min(ev.data.cal.data('colpick').height,(pageX - ev.data.pos.left))))/ev.data.cal.data('colpick').height, 10))\n\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupSelector = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colpick').color, ev.data.cal.get(0));\n\t\t\t\t$(document).off('mouseup touchend',upSelector);\n\t\t\t\t$(document).off('mousemove touchmove',moveSelector);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t//Submit button\n\t\t\tclickSubmit = function (ev) {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colpick').color;\n\t\t\t\tcal.data('colpick').origColor = col;\n\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\tcal.data('colpick').onSubmit(col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el);\n\t\t\t},\n\t\t\t//Show/hide the color picker\n\t\t\tshow = function (ev) {\n\t\t\t\t// Prevent the trigger of any direct parent\n\t\t\t\tev.stopPropagation();\n\t\t\t\tvar cal = $('#' + $(this).data('colpickId'));\n\t\t\t\tcal.data('colpick').onBeforeShow.apply(this, [cal.get(0)]);\n\t\t\t\tvar pos = $(this).offset();\n\t\t\t\tvar top = pos.top + this.offsetHeight;\n\t\t\t\tvar left = pos.left;\n\t\t\t\tvar viewPort = getViewport();\n\t\t\t\tvar calW = cal.width();\n\t\t\t\tif (left + calW > viewPort.l + viewPort.w) {\n\t\t\t\t\tleft -= calW;\n\t\t\t\t}\n\t\t\t\tcal.css({left: left + 'px', top: top + 'px'});\n\t\t\t\tif (cal.data('colpick').onShow.apply(this, [cal.get(0)]) != false) {\n\t\t\t\t\tcal.show();\n\t\t\t\t}\n\t\t\t\t//Hide when user clicks outside\n\t\t\t\t$('html').mousedown({cal:cal}, hide);\n\t\t\t\tcal.mousedown(function(ev){ev.stopPropagation();})\n\t\t\t},\n\t\t\thide = function (ev) {\n\t\t\t\tif (ev.data.cal.data('colpick').onHide.apply(this, [ev.data.cal.get(0)]) != false) {\n\t\t\t\t\tev.data.cal.hide();\n\t\t\t\t}\n\t\t\t\t$('html').off('mousedown', hide);\n\t\t\t},\n\t\t\tgetViewport = function () {\n\t\t\t\tvar m = document.compatMode == 'CSS1Compat';\n\t\t\t\treturn {\n\t\t\t\t\tl : window.pageXOffset || (m ? document.documentElement.scrollLeft : document.body.scrollLeft),\n\t\t\t\t\tw : window.innerWidth || (m ? document.documentElement.clientWidth : document.body.clientWidth)\n\t\t\t\t};\n\t\t\t},\n\t\t\t//Fix the values if the user enters a negative or high value\n\t\t\tfixHSB = function (hsb) {\n\t\t\t\treturn {\n\t\t\t\t\th: Math.min(360, Math.max(0, hsb.h)),\n\t\t\t\t\ts: Math.min(100, Math.max(0, hsb.s)),\n\t\t\t\t\tb: Math.min(100, Math.max(0, hsb.b))\n\t\t\t\t};\n\t\t\t}, \n\t\t\tfixRGB = function (rgb) {\n\t\t\t\treturn {\n\t\t\t\t\tr: Math.min(255, Math.max(0, rgb.r)),\n\t\t\t\t\tg: Math.min(255, Math.max(0, rgb.g)),\n\t\t\t\t\tb: Math.min(255, Math.max(0, rgb.b))\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixHex = function (hex) {\n\t\t\t\tvar len = 6 - hex.length;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tvar o = [];\n\t\t\t\t\tfor (var i=0; i<len; i++) {\n\t\t\t\t\t\to.push('0');\n\t\t\t\t\t}\n\t\t\t\t\to.push(hex);\n\t\t\t\t\thex = o.join('');\n\t\t\t\t}\n\t\t\t\treturn hex;\n\t\t\t},\n\t\t\trestoreOriginal = function () {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colpick').origColor;\n\t\t\t\tcal.data('colpick').color = col;\n\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t};\n\t\treturn {\n\t\t\tinit: function (opt) {\n\t\t\t\topt = $.extend({}, defaults, opt||{});\n\t\t\t\t//Set color\n\t\t\t\tif (typeof opt.color == 'string') {\n\t\t\t\t\topt.color = hexToHsb(opt.color);\n\t\t\t\t} else if (opt.color.r != undefined && opt.color.g != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = rgbToHsb(opt.color);\n\t\t\t\t} else if (opt.color.h != undefined && opt.color.s != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = fixHSB(opt.color);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//For each selected DOM element\n\t\t\t\treturn this.each(function () {\n\t\t\t\t\t//If the element does not have an ID\n\t\t\t\t\tif (!$(this).data('colpickId')) {\n\t\t\t\t\t\tvar options = $.extend({}, opt);\n\t\t\t\t\t\toptions.origColor = opt.color;\n\t\t\t\t\t\t//Generate and assign a random ID\n\t\t\t\t\t\tvar id = 'collorpicker_' + parseInt(Math.random() * 1000);\n\t\t\t\t\t\t$(this).data('colpickId', id);\n\t\t\t\t\t\t//Set the tpl's ID and get the HTML\n\t\t\t\t\t\tvar cal = $(tpl).attr('id', id);\n\t\t\t\t\t\t//Add class according to layout\n\t\t\t\t\t\tcal.addClass('colpick_'+options.layout+(options.submit?'':' colpick_'+options.layout+'_ns'));\n\t\t\t\t\t\t//Add class if the color scheme is not default\n\t\t\t\t\t\tif(options.colorScheme != 'light') {\n\t\t\t\t\t\t\tcal.addClass('colpick_'+options.colorScheme);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//Setup submit button\n\t\t\t\t\t\tcal.find('div.colpick_submit').html(options.submitText).click(clickSubmit);\n\t\t\t\t\t\t//Setup input fields\n\t\t\t\t\t\toptions.fields = cal.find('input').change(change).blur(blur).focus(focus);\n\t\t\t\t\t\tcal.find('div.colpick_field_arrs').mousedown(downIncrement).end().find('div.colpick_current_color').click(restoreOriginal);\n\t\t\t\t\t\t//Setup hue selector\n\t\t\t\t\t\toptions.selector = cal.find('div.colpick_color').on('mousedown touchstart',downSelector);\n\t\t\t\t\t\toptions.selectorIndic = options.selector.find('div.colpick_selector_outer');\n\t\t\t\t\t\t//Store parts of the plugin\n\t\t\t\t\t\toptions.el = this;\n\t\t\t\t\t\toptions.hue = cal.find('div.colpick_hue_arrs');\n\t\t\t\t\t\thuebar = options.hue.parent();\n\t\t\t\t\t\t//Paint the hue bar\n\t\t\t\t\t\tvar UA = navigator.userAgent.toLowerCase();\n\t\t\t\t\t\tvar isIE = navigator.appName === 'Microsoft Internet Explorer';\n\t\t\t\t\t\tvar IEver = isIE ? parseFloat( UA.match( /msie ([0-9]{1,}[\\.0-9]{0,})/ )[1] ) : 0;\n\t\t\t\t\t\tvar ngIE = ( isIE && IEver < 10 );\n\t\t\t\t\t\tvar stops = ['#ff0000','#ff0080','#ff00ff','#8000ff','#0000ff','#0080ff','#00ffff','#00ff80','#00ff00','#80ff00','#ffff00','#ff8000','#ff0000'];\n\t\t\t\t\t\tif(ngIE) {\n\t\t\t\t\t\t\tvar i, div;\n\t\t\t\t\t\t\tfor(i=0; i<=11; i++) {\n\t\t\t\t\t\t\t\tdiv = $('<div></div>').attr('style','height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+stops[i]+', endColorstr='+stops[i+1]+'); -ms-filter: \"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+stops[i]+', endColorstr='+stops[i+1]+')\";');\n\t\t\t\t\t\t\t\thuebar.append(div);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstopList = stops.join(',');\n\t\t\t\t\t\t\thuebar.attr('style','background:-webkit-linear-gradient(top center,'+stopList+'); background:-moz-linear-gradient(top center,'+stopList+'); background:linear-gradient(to bottom,'+stopList+'); ');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcal.find('div.colpick_hue').on('mousedown touchstart',downHue);\n\t\t\t\t\t\toptions.newColor = cal.find('div.colpick_new_color');\n\t\t\t\t\t\toptions.currentColor = cal.find('div.colpick_current_color');\n\t\t\t\t\t\t//Store options and fill with default color\n\t\t\t\t\t\tcal.data('colpick', options);\n\t\t\t\t\t\tfillRGBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHexFields(options.color, cal.get(0));\n\t\t\t\t\t\tsetHue(options.color, cal.get(0));\n\t\t\t\t\t\tsetSelector(options.color, cal.get(0));\n\t\t\t\t\t\tsetCurrentColor(options.color, cal.get(0));\n\t\t\t\t\t\tsetNewColor(options.color, cal.get(0));\n\t\t\t\t\t\t//Append to body if flat=false, else show in place\n\t\t\t\t\t\tif (options.flat) {\n\t\t\t\t\t\t\tcal.appendTo(this).show();\n\t\t\t\t\t\t\tcal.css({\n\t\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\t\tdisplay: 'block'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcal.appendTo(document.body);\n\t\t\t\t\t\t\t$(this).on(options.showEvent, show);\n\t\t\t\t\t\t\tcal.css({\n\t\t\t\t\t\t\t\tposition:'absolute'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Shows the picker\n\t\t\tshowPicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\tshow.apply(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Hides the picker\n\t\t\thidePicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\t$('#' + $(this).data('colpickId')).hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//Sets a color as new and current (default)\n\t\t\tsetColor: function(col, setCurrent) {\n\t\t\t\tsetCurrent = (typeof setCurrent === \"undefined\") ? 1 : setCurrent;\n\t\t\t\tif (typeof col == 'string') {\n\t\t\t\t\tcol = hexToHsb(col);\n\t\t\t\t} else if (col.r != undefined && col.g != undefined && col.b != undefined) {\n\t\t\t\t\tcol = rgbToHsb(col);\n\t\t\t\t} else if (col.h != undefined && col.s != undefined && col.b != undefined) {\n\t\t\t\t\tcol = fixHSB(col);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\treturn this.each(function(){\n\t\t\t\t\tif ($(this).data('colpickId')) {\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('colpickId'));\n\t\t\t\t\t\tcal.data('colpick').color = col;\n\t\t\t\t\t\tcal.data('colpick').origColor = col;\n\t\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\t\t\tcal.data('colpick').onChange.apply(cal.parent(), [col, hsbToHex(col), hsbToRgb(col), cal.data('colpick').el, 1]);\n\t\t\t\t\t\tif(setCurrent) {\n\t\t\t\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}();\n\t//Color space convertions\n\tvar hexToRgb = function (hex) {\n\t\tvar hex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\n\t\treturn {r: hex >> 16, g: (hex & 0x00FF00) >> 8, b: (hex & 0x0000FF)};\n\t};\n\tvar hexToHsb = function (hex) {\n\t\treturn rgbToHsb(hexToRgb(hex));\n\t};\n\tvar rgbToHsb = function (rgb) {\n\t\tvar hsb = {h: 0, s: 0, b: 0};\n\t\tvar min = Math.min(rgb.r, rgb.g, rgb.b);\n\t\tvar max = Math.max(rgb.r, rgb.g, rgb.b);\n\t\tvar delta = max - min;\n\t\thsb.b = max;\n\t\thsb.s = max != 0 ? 255 * delta / max : 0;\n\t\tif (hsb.s != 0) {\n\t\t\tif (rgb.r == max) hsb.h = (rgb.g - rgb.b) / delta;\n\t\t\telse if (rgb.g == max) hsb.h = 2 + (rgb.b - rgb.r) / delta;\n\t\t\telse hsb.h = 4 + (rgb.r - rgb.g) / delta;\n\t\t} else hsb.h = -1;\n\t\thsb.h *= 60;\n\t\tif (hsb.h < 0) hsb.h += 360;\n\t\thsb.s *= 100/255;\n\t\thsb.b *= 100/255;\n\t\treturn hsb;\n\t};\n\tvar hsbToRgb = function (hsb) {\n\t\tvar rgb = {};\n\t\tvar h = hsb.h;\n\t\tvar s = hsb.s*255/100;\n\t\tvar v = hsb.b*255/100;\n\t\tif(s == 0) {\n\t\t\trgb.r = rgb.g = rgb.b = v;\n\t\t} else {\n\t\t\tvar t1 = v;\n\t\t\tvar t2 = (255-s)*v/255;\n\t\t\tvar t3 = (t1-t2)*(h%60)/60;\n\t\t\tif(h==360) h = 0;\n\t\t\tif(h<60) {rgb.r=t1;\trgb.b=t2; rgb.g=t2+t3}\n\t\t\telse if(h<120) {rgb.g=t1; rgb.b=t2;\trgb.r=t1-t3}\n\t\t\telse if(h<180) {rgb.g=t1; rgb.r=t2;\trgb.b=t2+t3}\n\t\t\telse if(h<240) {rgb.b=t1; rgb.r=t2;\trgb.g=t1-t3}\n\t\t\telse if(h<300) {rgb.b=t1; rgb.g=t2;\trgb.r=t2+t3}\n\t\t\telse if(h<360) {rgb.r=t1; rgb.g=t2;\trgb.b=t1-t3}\n\t\t\telse {rgb.r=0; rgb.g=0;\trgb.b=0}\n\t\t}\n\t\treturn {r:Math.round(rgb.r), g:Math.round(rgb.g), b:Math.round(rgb.b)};\n\t};\n\tvar rgbToHex = function (rgb) {\n\t\tvar hex = [\n\t\t\trgb.r.toString(16),\n\t\t\trgb.g.toString(16),\n\t\t\trgb.b.toString(16)\n\t\t];\n\t\t$.each(hex, function (nr, val) {\n\t\t\tif (val.length == 1) {\n\t\t\t\thex[nr] = '0' + val;\n\t\t\t}\n\t\t});\n\t\treturn hex.join('');\n\t};\n\tvar hsbToHex = function (hsb) {\n\t\treturn rgbToHex(hsbToRgb(hsb));\n\t};\n\t$.fn.extend({\n\t\tcolpick: colpick.init,\n\t\tcolpickHide: colpick.hidePicker,\n\t\tcolpickShow: colpick.showPicker,\n\t\tcolpickSetColor: colpick.setColor\n\t});\n\t$.extend({\n\t\tcolpick:{ \n\t\t\trgbToHex: rgbToHex,\n\t\t\trgbToHsb: rgbToHsb,\n\t\t\thsbToHex: hsbToHex,\n\t\t\thsbToRgb: hsbToRgb,\n\t\t\thexToHsb: hexToHsb,\n\t\t\thexToRgb: hexToRgb\n\t\t}\n\t});\n})(jQuery);\n"],"sourceRoot":"/source/"}